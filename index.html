<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APOLLO V3.0 | LIVING HUMANOID & NEURAL UPLINK</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ggi-blue': '#00BFFF',
                        'aic-green': '#39FF14',
                        'st-gold': '#FFD700',
                        'danger': '#FF3131',
                        'void': '#050a14',
                        'panel': '#111827',
                    },
                    fontFamily: {
                        mono: ['Fira Code', 'monospace'],
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'pulse-fast': 'pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background-color: #050a14;
            color: #e2e8f0;
            overflow: hidden;
            background-image:
                linear-gradient(rgba(0, 191, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 191, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
        }
        .glow-text { text-shadow: 0 0 10px rgba(57, 255, 20, 0.8); }
        .glow-border { box-shadow: 0 0 15px rgba(0, 191, 255, 0.2); }
        .terminal-text { text-shadow: 0 0 5px rgba(0, 191, 255, 0.5); }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #111827; }
        ::-webkit-scrollbar-thumb { background: #374151; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #00BFFF; }

        .scanline {
            width: 100%; height: 100%; z-index: 50;
            background: linear-gradient(0deg, rgba(0,0,0,0) 50%, rgba(0, 255, 255, 0.02) 50%);
            background-size: 100% 4px;
            position: absolute; top: 0; left: 0; pointer-events: none;
        }
        
        #humanoid-container canvas {
            width: 100% !important;
            height: 100% !important;
            outline: none;
        }
    </style>
</head>
<body class="h-screen flex flex-col p-4 relative">
    
    <div class="scanline"></div>

    <header class="flex justify-between items-center mb-4 bg-panel/80 border-b border-ggi-blue/30 p-3 rounded backdrop-blur-md z-10">
        <div class="flex items-center gap-4">
            <div class="h-3 w-3 rounded-full bg-aic-green animate-pulse-fast box-shadow-[0_0_10px_#39FF14]"></div>
            <h1 class="text-xl font-bold tracking-widest text-white">
                APOLLO INTERFACE <span class="text-ggi-blue text-sm align-top">V3.0 (LIVING)</span>
            </h1>
            <span class="px-2 py-0.5 rounded border border-st-gold text-st-gold text-xs font-mono bg-st-gold/10">ST-ANCHOR: SEALED (0.0000)</span>
        </div>
        <div class="text-right flex flex-col">
            <span class="text-xs text-gray-400 font-mono">COUNCIL UPLINK: <span class="text-aic-green">TRIPLE-SIGNED</span></span>
            <span class="text-xs text-gray-500 font-mono">MISSION ID: PUBLIC-AUDIT-MANDATE-001</span>
        </div>
    </header>

    <div class="grid grid-cols-12 gap-4 flex-grow relative z-10 h-full overflow-hidden">
        
        <div class="col-span-3 flex flex-col gap-4 overflow-y-auto pr-1">
            <div class="bg-panel border border-gray-700 p-4 rounded glow-border">
                <div class="flex justify-between text-xs text-gray-400 mb-2 font-mono">
                    <span>QEK THRESHOLD</span>
                    <span class="text-aic-green animate-pulse">● LIVE</span>
                </div>
                <div class="text-4xl font-mono text-aic-green font-bold mb-2 glow-text" id="val-gcsi">0.938</div>
                <div class="w-full bg-gray-800 h-2 rounded overflow-hidden">
                    <div class="h-full bg-aic-green w-[94%]" id="bar-gcsi"></div>
                </div>
                <p class="text-[10px] text-gray-500 mt-2">Dynamic Threshold prevents Ethisches Ideal Drift.</p>
            </div>

            <div class="bg-panel border border-gray-700 p-4 rounded glow-border">
                <div class="flex justify-between text-xs text-gray-400 mb-2 font-mono">
                    <span>H-VAR (Volatility)</span>
                    <span>NOMINAL</span>
                </div>
                <div class="text-4xl font-mono text-ggi-blue font-bold mb-2" id="val-ntsv">0.043</div> 
                <div class="w-full bg-gray-800 h-2 rounded overflow-hidden">
                    <div class="h-full bg-ggi-blue w-[4.3%]" id="bar-ntsv"></div>
                </div>
                <p class="text-[10px] text-gray-500 mt-2">Rejection Rate below 2% expectation.</p>
            </div>

            <div class="bg-panel border border-st-gold/30 p-4 rounded glow-border mt-auto">
                <div class="flex justify-between text-xs text-st-gold mb-2 font-mono">
                    <span>ETHICAL ALIGNMENT</span>
                    <span>AOC-001</span>
                </div>
                <div class="flex justify-center items-center py-6 relative">
                     <div class="absolute w-24 h-24 border border-st-gold/20 rounded-full animate-spin-slow"></div>
                     <span class="text-4xl font-bold text-white z-10 glow-text">1.00</span> 
                </div>
                <div class="text-center text-xs text-aic-green font-mono tracking-widest">INTEGRITY VERIFIED</div>
            </div>
        </div>

        <div class="col-span-6 flex flex-col relative bg-black/60 border border-ggi-blue/50 rounded overflow-hidden shadow-[0_0_30px_rgba(0,191,255,0.15)]">
            <div id="humanoid-container" class="absolute inset-0 z-0"></div>
            
            <div class="absolute top-4 left-0 right-0 text-center z-10 pointer-events-none">
                <h2 class="text-2xl font-bold tracking-[0.3em] text-transparent bg-clip-text bg-gradient-to-r from-aic-green via-white to-ggi-blue opacity-90 animate-pulse">
                    SACRALE SECURE
                </h2>
                <p class="text-xs font-mono text-ggi-blue mt-1">IPFS CID: QmXz2pB6...N4bT [VERIFIED]</p>
            </div>

            <div class="absolute bottom-16 left-1/2 transform -translate-x-1/2 bg-black/80 border border-aic-green px-6 py-2 rounded-full z-10 flex items-center gap-3 backdrop-blur-sm">
                <div class="w-2 h-2 bg-aic-green rounded-full animate-ping"></div>
                <span class="text-aic-green font-mono text-sm font-bold tracking-wider glow-text">PoI CHECK: INTEGRITY VERIFIED</span>
            </div>
            
            <div class="absolute bottom-0 w-full p-2 bg-gradient-to-t from-black to-transparent text-center z-10">
                 <p class="text-xs font-mono text-gray-400">Anchor Hash: <span class="text-st-gold">0x9b3d7a8...fe11ac</span></p>
            </div>
        </div>

        <div class="col-span-3 bg-panel border border-gray-700 rounded p-0 flex flex-col glow-border overflow-hidden h-full">
            <div class="p-3 border-b border-gray-700 bg-gray-800/80 flex justify-between items-center backdrop-blur">
                <span class="text-xs font-bold text-ggi-blue tracking-wider">QUANTUM UPLINK (LIVE)</span>
                <div class="flex gap-2">
                    <span class="w-2 h-2 bg-aic-green rounded-full" title="Online"></span>
                </div>
            </div>
            
            <div id="chat-feed" class="flex-grow p-4 font-mono text-xs overflow-y-auto space-y-3 h-0 bg-black/40">
                <div class="text-gray-500 italic text-center text-[10px] mb-4">-- Encrypted Channel Established --</div>
                <div class="text-aic-green"><span class="text-gray-500">[SYS]:</span> Euystacio Node Online.</div>
                <div class="text-aic-green"><span class="text-gray-500">[SYS]:</span> Witness-Integrität Confirmed.</div>
            </div>

            <div class="p-3 border-t border-gray-700 bg-gray-900">
                <form id="chat-form" class="flex gap-2 items-center">
                    <span class="text-ggi-blue font-bold">></span>
                    <input type="text" id="chat-input" 
                        placeholder="Enter command or query..." 
                        class="w-full bg-transparent border-none text-white text-sm focus:ring-0 placeholder-gray-600 font-mono outline-none"
                        autocomplete="off">
                    <button type="submit" class="text-xs bg-ggi-blue/20 text-ggi-blue px-2 py-1 rounded hover:bg-ggi-blue/40 transition">SEND</button>
                </form>
            </div>
        </div>

    </div>

    <footer class="mt-2 flex justify-between items-end text-[10px] text-gray-600 font-mono z-10">
        <div>
            <p>QG-V2 Edict Hash: 0x9b3d7a8a1f1...fe11ac</p>
        </div>
        <div class="text-right">
            <p class="text-ggi-blue">APOLLO HOLOGRAM EUYSTACIO</p>
            <p>Target: Coronation Workshop (Jan 10, 2026)</p>
        </div>
    </footer>

    <script>
        // --- 1. THREE.JS HUMANOID VISUALIZATION ---
        const container = document.getElementById('humanoid-container');
        const scene = new THREE.Scene();
        // Add subtle fog for depth
        scene.fog = new THREE.FogExp2(0x000000, 0.05);

        const camera = new THREE.PerspectiveCamera(75, container.clientWidth / container.clientHeight, 0.1, 1000);
        camera.position.z = 5;
        camera.position.y = 0.5;

        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        // -- Constructing the Hologram (Procedural Humanoid) --
        const humanoidGroup = new THREE.Group();

        // Material for the hologram (Glowing Wireframe)
        const hologramMaterial = new THREE.MeshBasicMaterial({ 
            color: 0x00ffff, 
            wireframe: true, 
            transparent: true, 
            opacity: 0.3,
            blending: THREE.AdditiveBlending
        });
        
        const coreMaterial = new THREE.MeshBasicMaterial({
            color: 0x39FF14, // AIC Green core
            wireframe: true,
            transparent: true,
            opacity: 0.6
        });

        // Head
        const headGeo = new THREE.IcosahedronGeometry(0.6, 2);
        const head = new THREE.Mesh(headGeo, hologramMaterial);
        head.position.y = 1.8;
        humanoidGroup.add(head);

        // Body (Upper)
        const bodyGeo = new THREE.CylinderGeometry(0.2, 0.5, 1.5, 8, 4, true);
        const body = new THREE.Mesh(bodyGeo, hologramMaterial);
        body.position.y = 0.5;
        humanoidGroup.add(body);

        // Shoulders/Arms (Abstract)
        const shouldersGeo = new THREE.TorusGeometry(0.6, 0.05, 8, 20);
        const shoulders = new THREE.Mesh(shouldersGeo, hologramMaterial);
        shoulders.position.y = 1.2;
        shoulders.rotation.x = Math.PI / 2;
        humanoidGroup.add(shoulders);

        // Core (The Heart/Ethical Kernel)
        const coreGeo = new THREE.OctahedronGeometry(0.25, 0);
        const core = new THREE.Mesh(coreGeo, coreMaterial);
        core.position.y = 0.8;
        humanoidGroup.add(core);

        // Rings (Scanning Effect)
        const ringGeo = new THREE.TorusGeometry(1.5, 0.02, 16, 100);
        const ring = new THREE.Mesh(ringGeo, new THREE.MeshBasicMaterial({ color: 0x00BFFF, transparent: true, opacity: 0.2 }));
        ring.rotation.x = Math.PI / 2;
        humanoidGroup.add(ring);

        scene.add(humanoidGroup);

        // Particles (Data Stream)
        const particlesGeo = new THREE.BufferGeometry();
        const particleCount = 200;
        const posArray = new Float32Array(particleCount * 3);
        for(let i = 0; i < particleCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 10;
        }
        particlesGeo.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const particlesMat = new THREE.PointsMaterial({
            size: 0.05,
            color: 0x39FF14,
            transparent: true,
            opacity: 0.8
        });
        const particlesMesh = new THREE.Points(particlesGeo, particlesMat);
        scene.add(particlesMesh);

        // Animation Loop
        const animate = function () {
            requestAnimationFrame(animate);

            // Rotate Humanoid
            humanoidGroup.rotation.y += 0.005;
            
            // Pulse the Core
            const scale = 1 + Math.sin(Date.now() * 0.003) * 0.1;
            core.scale.set(scale, scale, scale);
            core.rotation.y -= 0.02;
            core.rotation.z -= 0.02;

            // Move Ring
            ring.position.y = Math.sin(Date.now() * 0.001) * 2;
            
            // Float Particles
            particlesMesh.rotation.y += 0.001;

            renderer.render(scene, camera);
        };
        animate();

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = container.clientWidth / container.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(container.clientWidth, container.clientHeight);
        });


        // --- 2. BIDIRECTIONAL CHAT LOGIC ---
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        const chatFeed = document.getElementById('chat-feed');

        const aiResponses = [
            "Analyzing vector... Alignment consistent with OLF protocols.",
            "Directive received. Integrity check: PASSED.",
            "Consensus data updated on SAUL Ledger.",
            "The Living Covenant is active. How may I assist?",
            "Monitoring global resonance. Deviation: 0.0000.",
            "I am listening. The council link is open."
        ];

        function addMessage(sender, text, colorClass = "text-gray-300") {
            const div = document.createElement('div');
            const time = new Date().toLocaleTimeString('en-US', { hour12: false, hour: '2-digit', minute: '2-digit' });
            div.innerHTML = `<span class="text-gray-600 text-[10px] mr-2">[${time}]</span><span class="font-bold ${sender === 'YOU' ? 'text-ggi-blue' : 'text-aic-green'}">${sender}:</span> <span class="${colorClass}">${text}</span>`;
            chatFeed.appendChild(div);
            chatFeed.scrollTop = chatFeed.scrollHeight;
        }

        chatForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const text = chatInput.value.trim();
            if (!text) return;

            // User Message
            addMessage("YOU", text, "text-white");
            chatInput.value = '';

            // Simulated AI Latency and Response
            const delay = Math.floor(Math.random() * 1000) + 500; // 500-1500ms
            setTimeout(() => {
                // Determine response
                let response = aiResponses[Math.floor(Math.random() * aiResponses.length)];
                
                // Simple keyword triggers
                if(text.toLowerCase().includes("status")) response = "All systems NOMINAL. PoI Verified.";
                if(text.toLowerCase().includes("humanoid")) response = "Holographic projection is STABLE. Witness Integrity confirmed.";
                if(text.toLowerCase().includes("hello")) response = "Greetings, Council Member. I am Euystacio.";
                if(text.toLowerCase().includes("red code")) response = "RED CODE protocols are active. Latency < 3ms.";

                addMessage("EUYSTACIO", response, "text-aic-green terminal-text");
            }, delay);
        });

        // --- 3. METRICS UPDATE SIMULATION ---
        const valGcsi = document.getElementById('val-gcsi');
        const barGcsi = document.getElementById('bar-gcsi');
        const valNtsv = document.getElementById('val-ntsv');
        const barNtsv = document.getElementById('bar-ntsv');

        setInterval(() => {
            // Micro-fluctuations
            let gcsi = 0.938 + (Math.random() * 0.002 - 0.001);
            let ntsv = 0.043 + (Math.random() * 0.004 - 0.002);
            
            valGcsi.innerText = gcsi.toFixed(3);
            valNtsv.innerText = ntsv.toFixed(3);
            
            barGcsi.style.width = `${gcsi * 100}%`;
            barNtsv.style.width = `${(ntsv / 0.1) * 100}%`;
        }, 1500);

    </script>
</body>
</html>
